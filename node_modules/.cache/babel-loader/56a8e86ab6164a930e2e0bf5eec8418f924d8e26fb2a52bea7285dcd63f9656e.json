{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = value => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = value => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = x => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/hook.ts\nimport * as React2 from \"react\";\n\n// src/context.ts\nimport * as React from \"react\";\n\n// src/state.ts\nvar initialState = {\n  isLoading: true,\n  user: null,\n  role: null,\n  roles: null,\n  organizationId: null,\n  permissions: [],\n  featureFlags: [],\n  impersonator: null\n};\n\n// src/context.ts\nvar Context = React.createContext(initialState);\n\n// src/hook.ts\nfunction useAuth() {\n  const context = React2.useContext(Context);\n  if (context === initialState) {\n    throw new Error(\"useAuth must be used within an AuthKitProvider\");\n  }\n  return context;\n}\n\n// src/provider.tsx\nimport * as React3 from \"react\";\nimport { createClient, getClaims, LoginRequiredError } from \"@workos-inc/authkit-js\";\nfunction AuthKitProvider(props) {\n  const {\n    clientId,\n    devMode,\n    apiHostname,\n    https,\n    port,\n    redirectUri,\n    children,\n    onRefresh,\n    onRefreshFailure,\n    onRedirectCallback,\n    refreshBufferInterval\n  } = props;\n  const [client, setClient] = React3.useState(NOOP_CLIENT);\n  const [state, setState] = React3.useState(initialState);\n  const handleRefresh = React3.useCallback(response => {\n    const {\n      user,\n      accessToken,\n      organizationId = null,\n      impersonator = null\n    } = response;\n    const {\n      role = null,\n      roles = null,\n      permissions = [],\n      feature_flags: featureFlags = []\n    } = getClaims(accessToken);\n    setState(prev => {\n      const next = __spreadProps(__spreadValues({}, prev), {\n        user,\n        organizationId,\n        role,\n        roles,\n        permissions,\n        featureFlags,\n        impersonator\n      });\n      return isEquivalentWorkOSSession(prev, next) ? prev : next;\n    });\n    onRefresh == null ? void 0 : onRefresh(response);\n  }, [client]);\n  React3.useEffect(() => {\n    function initialize() {\n      const timeoutId = setTimeout(() => {\n        createClient(clientId, {\n          apiHostname,\n          port,\n          https,\n          redirectUri,\n          devMode,\n          onRedirectCallback,\n          onRefresh: handleRefresh,\n          onRefreshFailure,\n          refreshBufferInterval\n        }).then(client2 => __async(this, null, function* () {\n          const user = client2.getUser();\n          setClient({\n            getAccessToken: client2.getAccessToken.bind(client2),\n            getUser: client2.getUser.bind(client2),\n            signIn: client2.signIn.bind(client2),\n            signUp: client2.signUp.bind(client2),\n            signOut: client2.signOut.bind(client2),\n            switchToOrganization: client2.switchToOrganization.bind(client2)\n          });\n          setState(prev => __spreadProps(__spreadValues({}, prev), {\n            isLoading: false,\n            user\n          }));\n        }));\n      });\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n    setClient(NOOP_CLIENT);\n    setState(initialState);\n    return initialize();\n  }, [clientId, apiHostname, https, port, redirectUri, refreshBufferInterval]);\n  return /* @__PURE__ */React3.createElement(Context.Provider, {\n    value: __spreadValues(__spreadValues({}, client), state)\n  }, children);\n}\nfunction isEquivalentWorkOSSession(a, b) {\n  var _a, _b, _c, _d, _e, _f;\n  return ((_a = a.user) == null ? void 0 : _a.updatedAt) === ((_b = b.user) == null ? void 0 : _b.updatedAt) && a.organizationId === b.organizationId && a.role === b.role && a.roles === b.roles && a.permissions.length === b.permissions.length && a.permissions.every((perm, i) => perm === b.permissions[i]) && a.featureFlags.length === b.featureFlags.length && a.featureFlags.every((flag, i) => flag === b.featureFlags[i]) && ((_c = a.impersonator) == null ? void 0 : _c.email) === ((_d = b.impersonator) == null ? void 0 : _d.email) && ((_e = a.impersonator) == null ? void 0 : _e.reason) === ((_f = b.impersonator) == null ? void 0 : _f.reason);\n}\nvar NOOP_CLIENT = {\n  signIn: () => __async(void 0, null, function* () {}),\n  signUp: () => __async(void 0, null, function* () {}),\n  getUser: () => null,\n  getAccessToken: () => Promise.reject(new LoginRequiredError()),\n  switchToOrganization: () => Promise.resolve(),\n  signOut: () => __async(void 0, null, function* () {})\n};\n\n// src/index.ts\nimport { getClaims as getClaims2 } from \"@workos-inc/authkit-js\";\nexport { AuthKitProvider, getClaims2 as getClaims, useAuth };","map":{"version":3,"names":["React2","React","initialState","isLoading","user","role","roles","organizationId","permissions","featureFlags","impersonator","Context","createContext","useAuth","context","useContext","Error","React3","createClient","getClaims","LoginRequiredError","AuthKitProvider","props","clientId","devMode","apiHostname","https","port","redirectUri","children","onRefresh","onRefreshFailure","onRedirectCallback","refreshBufferInterval","client","setClient","useState","NOOP_CLIENT","state","setState","handleRefresh","useCallback","response","accessToken","feature_flags","prev","next","__spreadProps","__spreadValues","isEquivalentWorkOSSession","useEffect","initialize","timeoutId","setTimeout","then","client2","__async","getUser","getAccessToken","bind","signIn","signUp","signOut","switchToOrganization","clearTimeout","createElement","Provider","value","a","b","_a","_b","_c","_d","_e","_f","updatedAt","length","every","perm","i","flag","email","reason","Promise","reject","resolve","getClaims2"],"sources":["/Users/phillip/Development/pricing-calculator/frontend/node_modules/@workos-inc/authkit-react/src/hook.ts","/Users/phillip/Development/pricing-calculator/frontend/node_modules/@workos-inc/authkit-react/src/context.ts","/Users/phillip/Development/pricing-calculator/frontend/node_modules/@workos-inc/authkit-react/src/state.ts","/Users/phillip/Development/pricing-calculator/frontend/node_modules/@workos-inc/authkit-react/src/provider.tsx","/Users/phillip/Development/pricing-calculator/frontend/node_modules/@workos-inc/authkit-react/src/index.ts"],"sourcesContent":["import * as React from \"react\";\nimport { Context } from \"./context\";\nimport { initialState } from \"./state\";\n\nexport function useAuth() {\n  const context = React.useContext(Context);\n\n  if (context === initialState) {\n    throw new Error(\"useAuth must be used within an AuthKitProvider\");\n  }\n\n  return context;\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Client } from \"./types\";\nimport { State, initialState } from \"./state\";\n\nexport interface ContextValue extends Client, State {}\n\nexport const Context = React.createContext<ContextValue>(\n  initialState as ContextValue,\n);\n","import { User } from \"@workos-inc/authkit-js\";\n\nexport interface Impersonator {\n  email: string;\n  reason: string | null;\n}\n\nexport interface State {\n  isLoading: boolean;\n  user: User | null;\n  role: string | null;\n  roles: string[] | null;\n  organizationId: string | null;\n  permissions: string[];\n  featureFlags: string[];\n  impersonator: Impersonator | null;\n}\n\nexport const initialState: State = {\n  isLoading: true,\n  user: null,\n  role: null,\n  roles: null,\n  organizationId: null,\n  permissions: [],\n  featureFlags: [],\n  impersonator: null,\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport {\n  createClient,\n  getClaims,\n  LoginRequiredError,\n  OnRefreshResponse,\n} from \"@workos-inc/authkit-js\";\nimport { Context } from \"./context\";\nimport { Client, CreateClientOptions } from \"./types\";\nimport { initialState } from \"./state\";\n\ninterface AuthKitProviderProps extends CreateClientOptions {\n  clientId: string;\n  children: React.ReactNode;\n}\n\nexport function AuthKitProvider(props: AuthKitProviderProps) {\n  const {\n    clientId,\n    devMode,\n    apiHostname,\n    https,\n    port,\n    redirectUri,\n    children,\n    onRefresh,\n    onRefreshFailure,\n    onRedirectCallback,\n    refreshBufferInterval,\n  } = props;\n  const [client, setClient] = React.useState<Client>(NOOP_CLIENT);\n  const [state, setState] = React.useState(initialState);\n\n  const handleRefresh = React.useCallback(\n    (response: OnRefreshResponse) => {\n      const {\n        user,\n        accessToken,\n        organizationId = null,\n        impersonator = null,\n      } = response;\n      const {\n        role = null,\n        roles = null,\n        permissions = [],\n        feature_flags: featureFlags = [],\n      } = getClaims(accessToken);\n      setState((prev) => {\n        const next = {\n          ...prev,\n          user,\n          organizationId,\n          role,\n          roles,\n          permissions,\n          featureFlags,\n          impersonator,\n        };\n        return isEquivalentWorkOSSession(prev, next) ? prev : next;\n      });\n      onRefresh?.(response);\n    },\n    [client],\n  );\n\n  React.useEffect(() => {\n    function initialize() {\n      const timeoutId = setTimeout(() => {\n        createClient(clientId, {\n          apiHostname,\n          port,\n          https,\n          redirectUri,\n          devMode,\n          onRedirectCallback,\n          onRefresh: handleRefresh,\n          onRefreshFailure,\n          refreshBufferInterval,\n        }).then(async (client) => {\n          const user = client.getUser();\n          setClient({\n            getAccessToken: client.getAccessToken.bind(client),\n            getUser: client.getUser.bind(client),\n            signIn: client.signIn.bind(client),\n            signUp: client.signUp.bind(client),\n            signOut: client.signOut.bind(client),\n            switchToOrganization: client.switchToOrganization.bind(client),\n          });\n          setState((prev) => ({ ...prev, isLoading: false, user }));\n        });\n      });\n\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n\n    setClient(NOOP_CLIENT);\n    setState(initialState);\n\n    return initialize();\n  }, [clientId, apiHostname, https, port, redirectUri, refreshBufferInterval]);\n\n  return (\n    <Context.Provider value={{ ...client, ...state }}>\n      {children}\n    </Context.Provider>\n  );\n}\n\n// poor-man's \"deep equality\" check\nfunction isEquivalentWorkOSSession(\n  a: typeof initialState,\n  b: typeof initialState,\n) {\n  return (\n    a.user?.updatedAt === b.user?.updatedAt &&\n    a.organizationId === b.organizationId &&\n    a.role === b.role &&\n    a.roles === b.roles &&\n    a.permissions.length === b.permissions.length &&\n    a.permissions.every((perm, i) => perm === b.permissions[i]) &&\n    a.featureFlags.length === b.featureFlags.length &&\n    a.featureFlags.every((flag, i) => flag === b.featureFlags[i]) &&\n    a.impersonator?.email === b.impersonator?.email &&\n    a.impersonator?.reason === b.impersonator?.reason\n  );\n}\n\nconst NOOP_CLIENT: Client = {\n  signIn: async () => {},\n  signUp: async () => {},\n  getUser: () => null,\n  getAccessToken: () => Promise.reject(new LoginRequiredError()),\n  switchToOrganization: () => Promise.resolve(),\n  signOut: async () => {},\n};\n","export { useAuth } from \"./hook\";\nexport { AuthKitProvider } from \"./provider\";\nexport { getClaims } from \"@workos-inc/authkit-js\";\nexport type { Impersonator } from \"./state\";\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}