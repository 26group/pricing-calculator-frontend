{"ast":null,"code":"var _jsxFileName = \"/Users/phillip/Development/pricing-calculator/frontend/src/features/auth/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, Stack, Typography, Container, TextField, Alert, CircularProgress } from '@mui/material';\nimport { useAuth } from '@workos-inc/authkit-react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { loginSuccess, setToken } from './authSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const {\n    user,\n    isLoading,\n    signIn\n  } = useAuth();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [testEmail, setTestEmail] = useState('');\n  const [isTestLoading, setIsTestLoading] = useState(false);\n  const [testError, setTestError] = useState('');\n  const handleLogin = () => {\n    signIn();\n  };\n  const handleTestLogin = async () => {\n    if (!testEmail.trim()) {\n      setTestError('Please enter an email address');\n      return;\n    }\n    try {\n      setIsTestLoading(true);\n      setTestError('');\n      console.log('üîê Starting test login with email:', testEmail);\n      const response = await fetch('http://localhost:4000/v1/auth/workos-callback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          workosUserId: 'test-' + Date.now(),\n          email: testEmail\n        })\n      });\n      console.log('üì° Response status:', response.status);\n      if (response.ok) {\n        const data = await response.json();\n        console.log('‚úÖ Test login successful');\n        console.log('‚úÖ User data:', data.user);\n        console.log('‚úÖ Token:', data.tokens.access.token.substring(0, 30) + '...');\n        if (data.tokens && data.tokens.access) {\n          const token = data.tokens.access.token;\n          localStorage.setItem('token', token);\n          console.log('‚úÖ Token saved to localStorage');\n          console.log('‚úÖ Token from localStorage:', localStorage.getItem('token').substring(0, 30) + '...');\n          dispatch(setToken(token));\n          console.log('‚úÖ Token dispatched to Redux');\n          dispatch(loginSuccess(data.user));\n          console.log('‚úÖ User dispatched to Redux');\n          setIsTestLoading(false);\n          console.log('‚úÖ Navigating to home page');\n          navigate('/');\n        }\n      } else {\n        const error = await response.json();\n        console.error('‚ùå Test login failed:', error);\n        setTestError(error.message || 'Test login failed');\n        setIsTestLoading(false);\n      }\n    } catch (error) {\n      console.error('‚ùå Error during test login:', error);\n      setTestError('Error during test login: ' + error.message);\n      setIsTestLoading(false);\n    }\n  };\n  if (!isLoading && user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      mt: 8,\n      textAlign: 'center',\n      maxWidth: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Sign in to Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"column\",\n      spacing: 3,\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"large\",\n        onClick: handleLogin,\n        disabled: isLoading,\n        fullWidth: true,\n        children: \"Continue with WorkOS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        sx: {\n          my: 2\n        },\n        children: \"Or use test login for development\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Test Email\",\n        type: \"email\",\n        value: testEmail,\n        onChange: e => setTestEmail(e.target.value),\n        placeholder: \"test@example.com\",\n        fullWidth: true,\n        disabled: isTestLoading,\n        onKeyPress: e => {\n          if (e.key === 'Enter') {\n            handleTestLogin();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        size: \"large\",\n        onClick: handleTestLogin,\n        disabled: isTestLoading || !testEmail.trim(),\n        fullWidth: true,\n        children: isTestLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 28\n        }, this) : 'Test Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), testError && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        fullWidth: true,\n        children: testError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"ucwrBCHa7d2RAOERa/cIJz8VjM8=\", false, function () {\n  return [useAuth, useNavigate, useDispatch];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Button","Stack","Typography","Container","TextField","Alert","CircularProgress","useAuth","Navigate","useNavigate","useDispatch","loginSuccess","setToken","jsxDEV","_jsxDEV","Login","_s","user","isLoading","signIn","navigate","dispatch","testEmail","setTestEmail","isTestLoading","setIsTestLoading","testError","setTestError","handleLogin","handleTestLogin","trim","console","log","response","fetch","method","headers","body","JSON","stringify","workosUserId","Date","now","email","status","ok","data","json","tokens","access","token","substring","localStorage","setItem","getItem","error","message","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","sx","mt","textAlign","maxWidth","children","variant","gutterBottom","direction","spacing","alignItems","size","onClick","disabled","fullWidth","color","my","label","type","value","onChange","e","target","placeholder","onKeyPress","key","severity","_c","$RefreshReg$"],"sources":["/Users/phillip/Development/pricing-calculator/frontend/src/features/auth/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Stack, Typography, Container, TextField, Alert, CircularProgress } from '@mui/material';\nimport { useAuth } from '@workos-inc/authkit-react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { loginSuccess, setToken } from './authSlice';\n\nexport default function Login() {\n  const { user, isLoading, signIn } = useAuth();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [testEmail, setTestEmail] = useState('');\n  const [isTestLoading, setIsTestLoading] = useState(false);\n  const [testError, setTestError] = useState('');\n\n  const handleLogin = () => {\n    signIn();\n  };\n\n  const handleTestLogin = async () => {\n    if (!testEmail.trim()) {\n      setTestError('Please enter an email address');\n      return;\n    }\n\n    try {\n      setIsTestLoading(true);\n      setTestError('');\n      \n      console.log('üîê Starting test login with email:', testEmail);\n      \n      const response = await fetch('http://localhost:4000/v1/auth/workos-callback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          workosUserId: 'test-' + Date.now(),\n          email: testEmail,\n        }),\n      });\n\n      console.log('üì° Response status:', response.status);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('‚úÖ Test login successful');\n        console.log('‚úÖ User data:', data.user);\n        console.log('‚úÖ Token:', data.tokens.access.token.substring(0, 30) + '...');\n        \n        if (data.tokens && data.tokens.access) {\n          const token = data.tokens.access.token;\n          localStorage.setItem('token', token);\n          console.log('‚úÖ Token saved to localStorage');\n          console.log('‚úÖ Token from localStorage:', localStorage.getItem('token').substring(0, 30) + '...');\n          \n          dispatch(setToken(token));\n          console.log('‚úÖ Token dispatched to Redux');\n          dispatch(loginSuccess(data.user));\n          console.log('‚úÖ User dispatched to Redux');\n          \n          setIsTestLoading(false);\n          console.log('‚úÖ Navigating to home page');\n          navigate('/');\n        }\n      } else {\n        const error = await response.json();\n        console.error('‚ùå Test login failed:', error);\n        setTestError(error.message || 'Test login failed');\n        setIsTestLoading(false);\n      }\n    } catch (error) {\n      console.error('‚ùå Error during test login:', error);\n      setTestError('Error during test login: ' + error.message);\n      setIsTestLoading(false);\n    }\n  };\n\n  if (!isLoading && user) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return (\n    <Container sx={{ mt: 8, textAlign: 'center', maxWidth: 400 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Sign in to Continue\n      </Typography>\n      <Stack direction=\"column\" spacing={3} alignItems=\"center\">\n        <Button \n          variant=\"contained\" \n          size=\"large\" \n          onClick={handleLogin} \n          disabled={isLoading}\n          fullWidth\n        >\n          Continue with WorkOS\n        </Button>\n\n        <Typography variant=\"body2\" color=\"textSecondary\" sx={{ my: 2 }}>\n          Or use test login for development\n        </Typography>\n\n        <TextField\n          label=\"Test Email\"\n          type=\"email\"\n          value={testEmail}\n          onChange={(e) => setTestEmail(e.target.value)}\n          placeholder=\"test@example.com\"\n          fullWidth\n          disabled={isTestLoading}\n          onKeyPress={(e) => {\n            if (e.key === 'Enter') {\n              handleTestLogin();\n            }\n          }}\n        />\n\n        <Button \n          variant=\"outlined\" \n          size=\"large\" \n          onClick={handleTestLogin}\n          disabled={isTestLoading || !testEmail.trim()}\n          fullWidth\n        >\n          {isTestLoading ? <CircularProgress size={24} /> : 'Test Login'}\n        </Button>\n\n        {testError && (\n          <Alert severity=\"error\" fullWidth>\n            {testError}\n          </Alert>\n        )}\n      </Stack>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}