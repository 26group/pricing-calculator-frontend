{"ast":null,"code":"var _jsxFileName = \"/Users/phillip/Development/pricing-calculator/frontend/src/features/auth/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, Stack, Typography, Container, TextField, Alert, CircularProgress } from '@mui/material';\nimport { useAuth } from '@workos-inc/authkit-react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { loginSuccess } from './authSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const {\n    user,\n    isLoading,\n    signIn\n  } = useAuth();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [testEmail, setTestEmail] = useState('');\n  const [isTestLoading, setIsTestLoading] = useState(false);\n  const [testError, setTestError] = useState('');\n  const handleLogin = () => {\n    signIn();\n  };\n  const handleTestLogin = async () => {\n    if (!testEmail.trim()) {\n      setTestError('Please enter an email address');\n      return;\n    }\n    try {\n      setIsTestLoading(true);\n      setTestError('');\n      const response = await fetch('http://localhost:4000/v1/auth/workos-callback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          workosUserId: 'test-' + Date.now(),\n          email: testEmail\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.tokens && data.tokens.access) {\n          localStorage.setItem('token', data.tokens.access.token);\n          dispatch(loginSuccess(data.user));\n          setTestLoading(false);\n          navigate('/');\n        }\n      } else {\n        const error = await response.json();\n        setTestError(error.message || 'Test login failed');\n        setIsTestLoading(false);\n      }\n    } catch (error) {\n      setTestError('Error during test login: ' + error.message);\n      setIsTestLoading(false);\n    }\n  };\n  if (!isLoading && user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      mt: 8,\n      textAlign: 'center',\n      maxWidth: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Sign in to Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"column\",\n      spacing: 3,\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"large\",\n        onClick: handleLogin,\n        disabled: isLoading,\n        fullWidth: true,\n        children: \"Continue with WorkOS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        sx: {\n          my: 2\n        },\n        children: \"Or use test login for development\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Test Email\",\n        type: \"email\",\n        value: testEmail,\n        onChange: e => setTestEmail(e.target.value),\n        placeholder: \"test@example.com\",\n        fullWidth: true,\n        disabled: isTestLoading,\n        onKeyPress: e => {\n          if (e.key === 'Enter') {\n            handleTestLogin();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        size: \"large\",\n        onClick: handleTestLogin,\n        disabled: isTestLoading || !testEmail.trim(),\n        fullWidth: true,\n        children: isTestLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 28\n        }, this) : 'Test Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), testError && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        fullWidth: true,\n        children: testError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"ucwrBCHa7d2RAOERa/cIJz8VjM8=\", false, function () {\n  return [useAuth, useNavigate, useDispatch];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Button","Stack","Typography","Container","TextField","Alert","CircularProgress","useAuth","Navigate","useNavigate","useDispatch","loginSuccess","jsxDEV","_jsxDEV","Login","_s","user","isLoading","signIn","navigate","dispatch","testEmail","setTestEmail","isTestLoading","setIsTestLoading","testError","setTestError","handleLogin","handleTestLogin","trim","response","fetch","method","headers","body","JSON","stringify","workosUserId","Date","now","email","ok","data","json","tokens","access","localStorage","setItem","token","setTestLoading","error","message","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","sx","mt","textAlign","maxWidth","children","variant","gutterBottom","direction","spacing","alignItems","size","onClick","disabled","fullWidth","color","my","label","type","value","onChange","e","target","placeholder","onKeyPress","key","severity","_c","$RefreshReg$"],"sources":["/Users/phillip/Development/pricing-calculator/frontend/src/features/auth/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Stack, Typography, Container, TextField, Alert, CircularProgress } from '@mui/material';\nimport { useAuth } from '@workos-inc/authkit-react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { loginSuccess } from './authSlice';\n\nexport default function Login() {\n  const { user, isLoading, signIn } = useAuth();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [testEmail, setTestEmail] = useState('');\n  const [isTestLoading, setIsTestLoading] = useState(false);\n  const [testError, setTestError] = useState('');\n\n  const handleLogin = () => {\n    signIn();\n  };\n\n  const handleTestLogin = async () => {\n    if (!testEmail.trim()) {\n      setTestError('Please enter an email address');\n      return;\n    }\n\n    try {\n      setIsTestLoading(true);\n      setTestError('');\n      \n      const response = await fetch('http://localhost:4000/v1/auth/workos-callback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          workosUserId: 'test-' + Date.now(),\n          email: testEmail,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.tokens && data.tokens.access) {\n          localStorage.setItem('token', data.tokens.access.token);\n          dispatch(loginSuccess(data.user));\n          setTestLoading(false);\n          navigate('/');\n        }\n      } else {\n        const error = await response.json();\n        setTestError(error.message || 'Test login failed');\n        setIsTestLoading(false);\n      }\n    } catch (error) {\n      setTestError('Error during test login: ' + error.message);\n      setIsTestLoading(false);\n    }\n  };\n\n  if (!isLoading && user) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return (\n    <Container sx={{ mt: 8, textAlign: 'center', maxWidth: 400 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Sign in to Continue\n      </Typography>\n      <Stack direction=\"column\" spacing={3} alignItems=\"center\">\n        <Button \n          variant=\"contained\" \n          size=\"large\" \n          onClick={handleLogin} \n          disabled={isLoading}\n          fullWidth\n        >\n          Continue with WorkOS\n        </Button>\n\n        <Typography variant=\"body2\" color=\"textSecondary\" sx={{ my: 2 }}>\n          Or use test login for development\n        </Typography>\n\n        <TextField\n          label=\"Test Email\"\n          type=\"email\"\n          value={testEmail}\n          onChange={(e) => setTestEmail(e.target.value)}\n          placeholder=\"test@example.com\"\n          fullWidth\n          disabled={isTestLoading}\n          onKeyPress={(e) => {\n            if (e.key === 'Enter') {\n              handleTestLogin();\n            }\n          }}\n        />\n\n        <Button \n          variant=\"outlined\" \n          size=\"large\" \n          onClick={handleTestLogin}\n          disabled={isTestLoading || !testEmail.trim()}\n          fullWidth\n        >\n          {isTestLoading ? <CircularProgress size={24} /> : 'Test Login'}\n        </Button>\n\n        {testError && (\n          <Alert severity=\"error\" fullWidth>\n            {testError}\n          </Alert>\n        )}\n      </Stack>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}