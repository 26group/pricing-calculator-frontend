{"ast":null,"code":"import { segmentForServices } from '../pages/Questions';\n\n/**\n * Resolves a service value based on segment\n * @param {Object} serviceEntry - The service entry from the catalog\n * @param {string} revenueSelection - The revenue segment selection\n * @returns {Object|undefined} The resolved service value\n */\nexport const resolveServiceValue = (serviceEntry, revenueSelection) => {\n  if (!serviceEntry) return undefined;\n  if (serviceEntry.code) {\n    return serviceEntry;\n  }\n  const normalizedSegment = segmentForServices(revenueSelection);\n  if (normalizedSegment && serviceEntry[normalizedSegment]) {\n    return serviceEntry[normalizedSegment];\n  }\n  if (revenueSelection && serviceEntry[revenueSelection]) {\n    return serviceEntry[revenueSelection];\n  }\n  const potentialEntries = Object.entries(serviceEntry);\n  const segmentKeys = ['micro', 'small', 'medium', 'large', 'enterprise'];\n  const hasSegmentKeys = potentialEntries.some(([key]) => segmentKeys.includes(key));\n  if (hasSegmentKeys) {\n    return undefined;\n  }\n  const fallback = potentialEntries.find(([, value]) => value && typeof value === 'object' && value.code);\n  return fallback ? fallback[1] : undefined;\n};\n\n/**\n * Calculates total monthly pricing for ServiceCatalog selections\n * @param {Object} serviceSelections - Service selections (id => 'yes'/'no')\n * @param {Object} catalog - Catalog structure with items and serviceEntry\n * @param {string} revenueSelection - Revenue segment\n * @returns {number} Total monthly cost\n */\nexport const calculateServiceCatalogTotalMonthly = (serviceSelections, catalog, revenueSelection) => {\n  let total = 0;\n  catalog.forEach(category => {\n    category.items.forEach(item => {\n      const selection = serviceSelections[item.id];\n      if (selection === 'yes') {\n        const resolvedService = resolveServiceValue(item.serviceEntry, revenueSelection);\n        if (resolvedService && resolvedService.monthly) {\n          total += resolvedService.monthly;\n        }\n      }\n    });\n  });\n  return Math.round(total * 100) / 100; // Round to 2 decimal places\n};\n\n/**\n * Calculates total once-off (yearly) pricing for ServiceCatalog selections\n * @param {Object} serviceSelections - Service selections (id => 'yes'/'no')\n * @param {Object} catalog - Catalog structure with items and serviceEntry\n * @param {string} revenueSelection - Revenue segment\n * @returns {number} Total once-off cost\n */\nexport const calculateServiceCatalogTotalOnceOff = (serviceSelections, catalog, revenueSelection) => {\n  let total = 0;\n  catalog.forEach(category => {\n    category.items.forEach(item => {\n      const selection = serviceSelections[item.id];\n      if (selection === 'yes') {\n        const resolvedService = resolveServiceValue(item.serviceEntry, revenueSelection);\n        if (resolvedService && resolvedService.yearly) {\n          total += resolvedService.yearly;\n        }\n      }\n    });\n  });\n  return Math.round(total * 100) / 100; // Round to 2 decimal places\n};","map":{"version":3,"names":["segmentForServices","resolveServiceValue","serviceEntry","revenueSelection","undefined","code","normalizedSegment","potentialEntries","Object","entries","segmentKeys","hasSegmentKeys","some","key","includes","fallback","find","value","calculateServiceCatalogTotalMonthly","serviceSelections","catalog","total","forEach","category","items","item","selection","id","resolvedService","monthly","Math","round","calculateServiceCatalogTotalOnceOff","yearly"],"sources":["/Users/phillip/Development/pricing-calculator/frontend/src/utils/serviceCatalogPricing.js"],"sourcesContent":["import { segmentForServices } from '../pages/Questions';\n\n/**\n * Resolves a service value based on segment\n * @param {Object} serviceEntry - The service entry from the catalog\n * @param {string} revenueSelection - The revenue segment selection\n * @returns {Object|undefined} The resolved service value\n */\nexport const resolveServiceValue = (serviceEntry, revenueSelection) => {\n  if (!serviceEntry) return undefined;\n\n  if (serviceEntry.code) {\n    return serviceEntry;\n  }\n\n  const normalizedSegment = segmentForServices(revenueSelection);\n  if (normalizedSegment && serviceEntry[normalizedSegment]) {\n    return serviceEntry[normalizedSegment];\n  }\n\n  if (revenueSelection && serviceEntry[revenueSelection]) {\n    return serviceEntry[revenueSelection];\n  }\n\n  const potentialEntries = Object.entries(serviceEntry);\n  const segmentKeys = ['micro', 'small', 'medium', 'large', 'enterprise'];\n  const hasSegmentKeys = potentialEntries.some(([key]) => segmentKeys.includes(key));\n  if (hasSegmentKeys) {\n    return undefined;\n  }\n\n  const fallback = potentialEntries.find(([, value]) => value && typeof value === 'object' && value.code);\n  return fallback ? fallback[1] : undefined;\n};\n\n/**\n * Calculates total monthly pricing for ServiceCatalog selections\n * @param {Object} serviceSelections - Service selections (id => 'yes'/'no')\n * @param {Object} catalog - Catalog structure with items and serviceEntry\n * @param {string} revenueSelection - Revenue segment\n * @returns {number} Total monthly cost\n */\nexport const calculateServiceCatalogTotalMonthly = (serviceSelections, catalog, revenueSelection) => {\n  let total = 0;\n\n  catalog.forEach((category) => {\n    category.items.forEach((item) => {\n      const selection = serviceSelections[item.id];\n      if (selection === 'yes') {\n        const resolvedService = resolveServiceValue(item.serviceEntry, revenueSelection);\n        if (resolvedService && resolvedService.monthly) {\n          total += resolvedService.monthly;\n        }\n      }\n    });\n  });\n\n  return Math.round(total * 100) / 100; // Round to 2 decimal places\n};\n\n/**\n * Calculates total once-off (yearly) pricing for ServiceCatalog selections\n * @param {Object} serviceSelections - Service selections (id => 'yes'/'no')\n * @param {Object} catalog - Catalog structure with items and serviceEntry\n * @param {string} revenueSelection - Revenue segment\n * @returns {number} Total once-off cost\n */\nexport const calculateServiceCatalogTotalOnceOff = (serviceSelections, catalog, revenueSelection) => {\n  let total = 0;\n\n  catalog.forEach((category) => {\n    category.items.forEach((item) => {\n      const selection = serviceSelections[item.id];\n      if (selection === 'yes') {\n        const resolvedService = resolveServiceValue(item.serviceEntry, revenueSelection);\n        if (resolvedService && resolvedService.yearly) {\n          total += resolvedService.yearly;\n        }\n      }\n    });\n  });\n\n  return Math.round(total * 100) / 100; // Round to 2 decimal places\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}